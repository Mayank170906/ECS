<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Location and IP Information</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f2f5;
      }
      .container {
        text-align: center;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 90%;
      }
      h1 {
        color: #333;
      }
      #details {
        margin-top: 20px;
        color: #555;
      }
      .error {
        color: red;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Your Location and Network Info</h1>
      <div id="details"></div>
    </div>

    <script>
      window.onload = function () {
        getLocation();
        getIPInfo();
        displayDateTime();
      };

      // Function to get GPS-based location
      function getLocation() {
        const detailsDiv = document.getElementById("details");
        detailsDiv.innerHTML += "<p>Requesting location...</p>";

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
          detailsDiv.innerHTML +=
            "<p class='error'>Geolocation is not supported by this browser.</p>";
        }
      }

      // Display GPS coordinates if available
      function showPosition(position) {
        const latitude = position.coords.latitude.toFixed(8); // Format to 8 decimal places
        const longitude = position.coords.longitude.toFixed(8); // Format to 8 decimal places
        document.getElementById("details").innerHTML += ` 
          <p>Latitude: ${latitude}</p>
          <p>Longitude: ${longitude}</p>
        `;
      }

      // Error handling for GPS
      function showError(error) {
        let message;
        switch (error.code) {
          case error.PERMISSION_DENIED:
            message = "User denied the request for Geolocation.";
            break;
          case error.POSITION_UNAVAILABLE:
            message = "Location information is unavailable.";
            break;
          case error.TIMEOUT:
            message = "The request to get user location timed out.";
            break;
          case error.UNKNOWN_ERROR:
            message = "An unknown error occurred.";
            break;
        }
        document.getElementById(
          "details"
        ).innerHTML += `<p class='error'>${message}</p>`;
      }

      // Function to get IP-based location information
      async function getIPInfo() {
        const detailsDiv = document.getElementById("details");
        detailsDiv.innerHTML += "<p>Fetching IP information...</p>";

        try {
          const response = await fetch("https://ipapi.co/json/");
          const data = await response.json();
          detailsDiv.innerHTML += `
            <p>IP Address: ${data.ip}</p>
            <p>City: ${data.city}</p>
            <p>Region: ${data.region}</p>
            <p>Country: ${data.country_name}</p>
            <p>Network Provider: ${data.org}</p>
            <p>Place Name: ${data.city}, ${data.region}, ${data.country_name}</p>
          `;
        } catch (error) {
          detailsDiv.innerHTML +=
            "<p class='error'>Failed to fetch IP information.</p>";
        }
      }

      // Function to display current date and time
      function displayDateTime() {
        const detailsDiv = document.getElementById("details");
        const now = new Date();
        const date = now.toLocaleDateString();
        const time = now.toLocaleTimeString();
        detailsDiv.innerHTML += `
          <p>Date: ${date}</p>
          <p>Time: ${time}</p>
        `;
      }
    </script>
  </body>
</html>
